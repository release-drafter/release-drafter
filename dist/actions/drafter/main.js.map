{"version":3,"file":"main.js","sources":["../../../src/actions/drafter/main.ts"],"sourcesContent":["import { Config, StandaloneInput } from 'src/types'\nimport { findPreviousReleases, findPullRequests } from './lib'\nimport { buildReleasePayload } from './lib/build-release-payload/build-release-payload'\n\nexport const main = async (params: {\n  config: Config\n  input: StandaloneInput\n}) => {\n  /**\n   * 1. find previous releases - returns latest release\n   * 2. find commits since latest release, with their associated pull-requests\n   * 3. sort those pull-requests according to the desired config (for release-body)\n   * 4. generate release info\n   * 5. create a release (may be a draft) or update previous draft\n   * 6. set action outputs\n   */\n  const { config, input } = params\n\n  const { draftRelease, lastRelease } = await findPreviousReleases(config)\n\n  const { commits, pullRequests } = await findPullRequests({\n    lastRelease,\n    config\n  })\n\n  const releaseInfo = buildReleasePayload({\n    commits,\n    config,\n    input,\n    lastRelease,\n    pullRequests\n  })\n}\n"],"names":[],"mappings":";;;AAIO,MAAM,OAAO,OAAO,WAGrB;AASJ,QAAM,EAAE,QAAQ,MAAA,IAAU;AAE1B,QAAM,EAAE,cAAc,YAAA,IAAgB,MAAM,qBAAqB,MAAM;AAEvE,QAAM,EAAE,SAAS,aAAA,IAAiB,MAAM,iBAAiB;AAAA,IACvD;AAAA,IACA;AAAA,EAAA,CACD;AAEmB,sBAAoB;AAAA,IACtC;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA,CACD;AACH;"}